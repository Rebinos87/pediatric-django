{% extends 'base.html' %}

{% block title %}Patient Report{% endblock %}

{% block content %}
<h4 class="mb-3">Patient Report - {{ patient.patient_name }}</h4>

<div class="card mb-3">
  <div class="card-body">
    <p class="mb-1"><strong>Name:</strong> {{ patient.patient_name }}</p>
    <p class="mb-1"><strong>DOB:</strong> {{ patient.date_of_birth|date:"Y-m-d" }}</p>
    <p class="mb-1"><strong>Age:</strong> {{ age }}</p>
    <p class="mb-1"><strong>Gender:</strong> {{ patient.gender }}</p>
    <p class="mb-1"><strong>Parent:</strong> {{ patient.parent_name|default:"-" }}</p>
  </div>
</div>

<div class="card">
  <div class="card-header">
    Measurements
  </div>
  <div class="card-body p-0">
    <table class="table table-sm mb-0">
      <thead class="table-light">
        <tr>
          <th>Date</th>
          <th>Age</th>
          <th>Height (cm)</th>
          <th>Weight (kg)</th>
          <th>BMI</th>
        </tr>
      </thead>
      <tbody>
        {% for m in measurements %}
        <tr>
          <td>{{ m.measurement_date|date:"Y-m-d" }}</td>
          <td>{{ m.age_display }}</td>
          <td>{{ m.height }}</td>
          <td>{{ m.weight }}</td>
          <td>{% if m.bmi %}{{ m.bmi|floatformat:1 }}{% else %}-{% endif %}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center text-muted py-3">No measurements.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
